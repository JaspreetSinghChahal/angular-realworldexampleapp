<h2 mat-dialog-title>Add New User</h2>


<mat-dialog-content [formGroup]="userForm" class="create-user-dialog">

    <div fxLayout="row" fxLayoutAlign="space-between center">

        <mat-form-field>
            <mat-label>First Name</mat-label>
            <input matInput type="text" formControlName="firstName" placeholder="John" aria-label="firstName">
            <mat-error class="error-message" *ngIf="data.firstName.invalid">
                <span *ngIf="data.firstName.errors?.required">FirstName is required</span>
            </mat-error>
        </mat-form-field>

        <mat-form-field>
            <mat-label>Last Name</mat-label>
            <input matInput type="text" formControlName="lastName" placeholder="Doe" aria-label="lastName">
            <mat-error class="error-message" *ngIf="data.lastName.invalid">
                <span *ngIf="data.lastName.errors?.required">LastName is required</span>
            </mat-error>
        </mat-form-field>

    </div>

    <div fxLayout="row" fxLayoutAlign="space-between center">

        <mat-form-field>
            <input matInput placeholder="Password" formControlName="password" required>
            <mat-error class="error-message" *ngIf="data.password.invalid">
                <span *ngIf="data.password.errors?.required">Password is required</span>
                <span *ngIf="data.password.errors?.minlength">Password must be at least 6 characters</span>
            </mat-error>
        </mat-form-field>

        <mat-form-field>
            <mat-label>Phone number</mat-label>
            <input matInput type="number" formControlName="phoneNumber" placeholder="1234567891"
                aria-label="phoneNumber">
            <mat-error class="error-message" *ngIf="data.phoneNumber.invalid">
                <span *ngIf="data.phoneNumber.errors?.required">Phone Number is required</span>
                <span *ngIf="data.phoneNumber.errors?.pattern">Enter 10 digit mobile number</span>
            </mat-error>
        </mat-form-field>

    </div>

    <div fxLayout="row" fxLayoutAlign="space-between center">

        <mat-form-field>
            <mat-label>Role</mat-label>
            <mat-select placeholder="Assign Role" formControlName="role" (selectionChange)="roleChange($event)">
                <mat-option *ngFor="let role of allRoles" [value]="role.id"> {{ role.name }}
                </mat-option>
            </mat-select>
            <mat-error class="error-message" *ngIf="data.role.invalid">
                <span *ngIf="data.role.errors?.required">Role is required</span>
            </mat-error>
        </mat-form-field>

        <mat-form-field>
            <mat-label>Location</mat-label>
            <textarea matInput type="text" rows="3" formControlName="location" placeholder="New York"
                aria-label="location"></textarea>
            <mat-error class="error-message" *ngIf="data.location.invalid">
                <span *ngIf="data.location.errors?.required">Location is required</span>
            </mat-error>
        </mat-form-field>

    </div>

    <div fxLayout="row" fxLayoutAlign="space-between center">

        <mat-form-field>
            <mat-label>Other Details</mat-label>
            <textarea matInput type="text" rows="3" formControlName="otherDetails" placeholder="comments"
                aria-label="otherDetails"></textarea>
        </mat-form-field>

        <mat-form-field *ngIf="showEmail">
            <mat-label>Email</mat-label>
            <input matInput type="text" formControlName="email" placeholder="abc@gmail.com" aria-label="email">
            <mat-error class="error-message" *ngIf="data.email.invalid">
                <span *ngIf="data.email.errors?.required">Email is required</span>
                <span *ngIf="data.email.errors?.pattern">Please enter valid email</span>
            </mat-error>
        </mat-form-field>

    </div>


</mat-dialog-content>

<mat-dialog-actions>

    <div fxLayout="row" fxLayoutAlign="end" fxLayoutGap="10px">

        <button class="mat-raised-button mat-primary" (click)="addUser()"> Save </button>

        <button class="mat-raised-button" (click)="close()"> Cancel </button>
    </div>

</mat-dialog-actions>